#!/usr/bin/env zsh

prompt_fg='#C2C2C2'
prompt_bg='#414359'
prompt_mg='#8D8D8D'

prompt_dir='#3DAEE9'
prompt_err='#E11A1A'
prompt_ok='#16A085'

prompt_l_begin ()
{
  print -n "%K{$prompt_bg}"
  print -n "%F{$prompt_fg}"
  print -n " "
}

prompt_l_sep ()
{
  print -n "%f"
  print -n "%F{$prompt_mg}"
  print -n " \uE0B1 "
  print -n "%f"
  print -n "%F{$prompt_fg}"
  print -n " "
}

prompt_l_end ()
{
  print -n " "
  print -n "%f"
  print -n "%k"
  print -n "%F{$prompt_bg}"
  print -n "\uE0B0"
  print -n "%f"
  print -n " "
}

prompt_l ()
{
  prompt_l_begin
  print -n "%B%n%b"
  print -n "@"
  print -n "%B%m%b"
  prompt_l_end
}

prompt_r_begin ()
{
  print -n "%F{$prompt_bg}"
  print -n "\uE0B2"
  print -n "%f"
  print -n "%K{$prompt_bg}"
  print -n "%F{$prompt_fg}"
  print -n " "
}

prompt_r_sep ()
{
  print -n "%f"
  print -n "%F{$prompt_mg}"
  print -n " \uE0B3 "
  print -n "%f"
  print -n "%F{$prompt_fg}"
}

prompt_r_end ()
{
  print -n " "
  print -n "%f"
  print -n "%k"
}

prompt_r ()
{
  prompt_r_begin

  # Show error code
  print -n "%B"
  print -n "%("
  print -n "?"
  print -n ".%F{$prompt_ok}\xE2\x9C\x94%f"
  print -n ".%F{$prompt_err}%? \xE2\x9C\x96%f"
  print -n ")"
  print -n "%b"
  prompt_r_sep

  # Show directory
  print -n "%B%F{$prompt_dir}"
  print -n "%1~ "
  print -n "%b%f"

  prompt_r_end
}


cat >'.zshrc.d/00_prompt' <<EOF 

############################################
## AUTOMATICALLY GENERATED -- DO NOT EDIT ##
############################################

function ()
{
  if [ -n "\$TERM_PROGRAM" ]
  then
    case "\$TERM_PROGRAM" in
      konsole)         fancy=1;;
      Apple_Terminal)  fancy=1;;
      iTerm.app)       fancy=1;;
      PuTTY)           fancy=1;;
      *)               fancy=0;;
    esac
  else
    fancy=0
  fi

  if [ "\$fancy" = "1" ]
  then
    PS1='$(prompt_l)'
    RPS1='$(prompt_r)'
  else
    PS1='%B%n%b@%B%m%b%# '
    RPS1='%(?..%B%?%b | )%1~'
  fi
}

EOF

